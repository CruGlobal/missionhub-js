!function(){"use strict";angular.module("missionhub.api.utils",["LocalStorageModule"])}(),function(){"use strict";angular.module("missionhub.api.utils").constant("_",window._)}(),function(){"use strict";function n(n){function t(){return n.get("firstName")}function e(t){return n.set("firstName",t)}function r(){return n.get("lastName")}function i(t){return n.set("lastName",t)}function u(){return n.get("personId")}function a(t){return n.set("personId",t)}function s(){return n.get("profilePicture")}function o(t){return n.set("profilePicture",t)}function c(){return n.get("currentOrganization")}function l(t){return n.set("currentOrganization",t)}function f(){n.clearAll()}var g={getFirstName:t,setFirstName:e,getLastName:r,setLastName:i,getPersonId:u,setPersonId:a,getProfilePicture:s,setProfilePicture:o,getCurrentOrganization:c,setCurrentOrganization:l,clearAll:f};return g}angular.module("missionhub.api.utils").factory("userDetails",n),n.$inject=["localStorageService"]}(),function(){"use strict";function n(n,t){function e(t,e){a=e;var u=r(t.included);return n.isArray(t.data)?n(t.data).map(function(n){return i(n,u)}).value():i(t.data,u)}function r(t){return n(t).groupBy(function(n){return n.type}).mapValues(function(t){return n(t).mapKeys(function(n){return n.id}).mapValues(i).value()}).value()}function i(t,e){var r={};return r.id=t.id,r.type=t.type,r=n.merge(r,t.attributes),n.isObject(e)&&!n.isEmpty(e)&&(r=n.merge(r,u(t.relationships,e))),r}function u(e,r){return n(e).mapValues(function(e){return n(e.data).map(function(n){return void 0===r[n.type]||void 0===r[n.type][n.id]?void t.error("Deserializing response from",a+": Could not load data for relationship of type",n.type,"and id",n.id):r[n.type][n.id]}).value()}).value()}var a,s={deserialize:e,_indexIncludes:r,_flattenData:i,_findRelationships:u};return s}angular.module("missionhub.api.utils").factory("jsonapi",n),n.$inject=["_","$log"]}(),function(){"use strict";angular.module("missionhub.api.filters",[])}(),function(){"use strict";function n(){return function(n){if(!n)return"";var t=n.toString().trim().replace(/^\+/,"");if(t.match(/[^0-9]/))return n;var e,r,i;switch(t.length){case 10:e=1,r=t.slice(0,3),i=t.slice(3);break;case 11:e=t[0],r=t.slice(1,4),i=t.slice(4);break;case 12:e=t.slice(0,3),r=t.slice(3,5),i=t.slice(5);break;default:return n}return 1===e&&(e=""),i=i.slice(0,3)+"-"+i.slice(3),(e+" ("+r+") "+i).trim()}}angular.module("missionhub.api.filters").filter("tel",n)}(),function(){"use strict";function n(n,t){return function(e){if(!e)return"";var r=n.currentOrg(),i=t.find(r.surveys,{id:e.survey_id});return t.result(i,"title","")}}angular.module("missionhub.api.filters").filter("surveyName",n),n.$inject=["api","lodash"]}(),function(){"use strict";function n(){return function(n){if(!n||!n.phone_numbers||0===n.phone_numbers.length)return"";for(var t=0;t<n.phone_numbers.length;){if(n.phone_numbers[t].primary)return n.phone_numbers[t].number;t++}return n.phone_numbers[0].number}}angular.module("missionhub.api.filters").filter("personPrimaryPhone",n)}(),function(){"use strict";function n(){return function(n){return n&&n.first_name?n.first_name+" "+n.last_name:""}}angular.module("missionhub.api.filters").filter("personFullname",n)}(),function(){"use strict";function n(){return function(n,t){if(t=t||40,!n||!n.first_name)return"";if(n.picture)return n.picture+"?width="+t+"&height="+t;for(var e="444444",r=0,i=0;r<n.first_name.length;i=n.first_name.charCodeAt(r++)+((i<<5)-i));for(var r=0,e="";3>r;e+=("00"+(i>>8*r++&255).toString(16)).slice(-2));return"https://avatars.discourse.org/letter/"+n.first_name.slice(0,1)+"/"+e+"/"+t+".png"}}angular.module("missionhub.api.filters").filter("personAvatar",n)}(),function(){"use strict";function n(){return function(n){return n?n.initiators[0]?n.initiators[0]:n.creator?n.creator:{}:{}}}angular.module("missionhub.api.filters").filter("interactionPrimaryInitiator",n)}(),function(){"use strict";function n(){return function(n){var t="http://maps.google.com/maps?q=";return n.address1&&(t+=n.address1+"+"),n.address2&&(t+=n.address2+"+"),n.city&&(t+=n.city+",+"),n.state&&(t+=n.state+"+"),n.country&&(t+=n.country),t.lastIndexOf("+")===t.length-1&&(t=t.slice(0,-1)),t}}angular.module("missionhub.api.filters").filter("googleMapsAddress",n)}(),function(){"use strict";function n(){return function(n){return"background-image: url("+n+")"}}angular.module("missionhub.api.filters").filter("backgroundStyle",n)}(),function(){"use strict";angular.module("missionhub.api.cache",[])}(),function(){"use strict";function n(){function n(n){return n.id?(t[n.id]=t[n.id]||{},angular.merge(t[n.id],n),!0):t[n]}var t={};return{person:n}}angular.module("missionhub.api.cache").factory("personCache",n)}(),function(){"use strict";function n(){function n(n){return n.id?(t[n.id]=t[n.id]||{},angular.merge(t[n.id],n),!0):t[n]}var t={};return{organization:n}}angular.module("missionhub.api.cache").factory("organizationCache",n)}(),function(){"use strict";function n(){function n(n){return n&&n.length?0===n.length?0===t.length:(t=[],angular.merge(t,n),!0):angular.extend([],t)}var t=[];return{list:n}}angular.module("missionhub.api.cache").factory("organizationListCache",n)}(),function(){"use strict";angular.module("missionhub.api",["restangular","missionhub.api.cache","missionhub.api.filters","missionhub.api.utils"])}(),function(){"use strict";function n(n,t){function e(t){var e={};return void 0!=t&&(e.order=t),n.currentRestangular().all("people").getList(e)}function r(t){return n.currentRestangular().one("people",t).get()}function i(){return n.currentRestangular().one("people",t.getPersonId()).get()}function u(t){return n.currentRestangular().one("people",t).get({include:"email_addresses"})}function a(t){return n.currentRestangular().one("people",t).get({include:"interactions"})}var s={all:e,get:r,getWithEmails:u,getWithInteractions:a,current:i};return s}angular.module("missionhub.api").factory("people",n),n.$inject=["organizations","userDetails"]}(),function(){"use strict";function n(n,t){function e(){return a.allRestangular().getList()}function r(){return a.currentRestangular().get()}function i(){return n.all("organizations")}function u(){return n.one("organizations",t.getCurrentOrganization().id)}var a={all:e,current:r,allRestangular:i,currentRestangular:u};return a}angular.module("missionhub.api").factory("organizations",n),n.$inject=["Restangular","userDetails"]}(),function(){"use strict";function n(n,t){function e(n,t,e,i){function u(){n.addResponseInterceptor(function(n,e,r,i){return t.deserialize(n,i)})}var a={baseUrl:r.baseUrl,people:{all:e.all,current:e.current,get:e.get},organizations:{all:i.all,current:i.current}};return u(),a}var r={$get:e};return Object.defineProperties(r,{baseUrl:{get:function(){return n.baseUrl},set:function(e){n.baseUrl=e,t.setBaseUrl(e)}}}),e.$inject=["Restangular","jsonapi","people","organizations"],r}angular.module("missionhub.api").provider("api",n),n.$inject=["apiConfig","RestangularProvider"]}(),function(){"use strict";angular.module("missionhub.api").constant("_",window._).constant("apiConfig",{baseUrl:"/"})}(),function(){"use strict";function n(n){n.setPrefix("mh.user")}angular.module("missionhub.api").config(n),n.$inject=["localStorageServiceProvider"]}();